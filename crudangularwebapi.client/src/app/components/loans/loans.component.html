<div class="container p-5" *ngIf="visibilityTable">
  <div class="border boder-light rounded p-5">
    <div>
      <button type="button" class="btn btn-sm btn-secondary" (click)="ShowRegisterForm()">
        New Loan
      </button>
    </div>

    <hr />

    <table class="table table-striped table-hover table-sm" *ngIf="loans">
      <tr class="thead-light">
        <th>Value Obtained</th>
        <th>Coin</th>
        <th>Conversion Rate To Be Real</th>
        <th>Date Of Loan</th>
        <th>Date Of Expiration</th>
        <th>Customer Id</th>
        <th>Value To Be Paid</th>
      </tr>
      <tr *ngFor="let loan of loans">
        <!-- for para buscar cara customer na variÃ¡vel customers (definida no arquivo customers.component.ts) -->
        <td>{{loan.valueObtained}}</td>
        <td>{{loan.coin}}</td>
        <td>{{loan.conversionRateToReal}}</td>
        <td>{{loan.dateOfLoan}}</td>
        <td>{{loan.dateOfExpiration}}</td>
        <td>{{loan.customerId}}</td>
        <td>{{loan.valueToBePaid}}</td>
        <td>
          <button type="button" class="btn btn-sm btn-outline-info" (click)="ShowUpdateForm(loan.id)">
            Update
          </button> |
          <button type="button" class="btn btn-sm btn-outline-danger" (click)="ShowDeleteConfirmation(loan.id, modalContent)">
            Delete
          </button>
        </td>
      </tr>
    </table>
  </div>
</div>



<div class="container p-5" *ngIf="visibilityForm">
  <div class="row">
    <div class="col-6 border border-light rounded p-5 shadow" *ngIf="form">
      <h6>{{tittleForm}}</h6>

      <hr />

      <form [formGroup]="form" (ngSubmit)="SendForm()">
        <div class="form-group">
          <label>Value Obtained</label>
          <input type="number" class="form-control form-control-sm" formControlName="valueObtained" />
          <div *ngIf="form.get('valueObtained').invalid && simulateClicked" class="text-danger">
            Value Obtained is required.
          </div>
        </div>
        <div class="form-group">
          <label>Coin</label>
          <input type="text" class="form-control form-control-sm" formControlName="coin" />
          <div *ngIf="form.get('coin').invalid && simulateClicked" class="text-danger">
            Coin is required.
          </div>
        </div>
        <div class="form-group">
          <label>Conversion Rate To Real</label>
          <input type="number" class="form-control form-control-sm" formControlName="conversionRateToReal" />
          <div *ngIf="form.get('conversionRateToReal').invalid && simulateClicked" class="text-danger">
            Conversion Rate To Real is required.
          </div>
        </div>
        <div class="form-group">
          <label>Date Of Loan</label>
          <input type="date" class="form-control form-control-sm" formControlName="dateOfLoan" />
          <div *ngIf="form.get('dateOfLoan').invalid && simulateClicked" class="text-danger">
            Date Of Loan is required.
          </div>
        </div>
        <div class="form-group">
          <label>Date Of Expiration</label>
          <input type="date" class="form-control form-control-sm" formControlName="dateOfExpiration" />
          <div *ngIf="form.get('dateOfExpiration').invalid && simulateClicked" class="text-danger">
            Date Of Expiration is required.
          </div>
        </div>
        <div class="form-group">
          <label>Customer Id</label>
          <input type="number" class="form-control form-control-sm" formControlName="customerId" />
          <div *ngIf="form.get('customerId').invalid && simulateClicked" class="text-danger">
            Customer Id is required.
          </div>
        </div>
        <!--        <div class="form-group">
          <label>Value To Be Paid</label>
          <input type="number" class="form-control form-control-sm" formControlName="valueToBePaid" />
        </div>
        -->

        <div class="form-group">
          <label>Value To Be Paid</label>
          <input type="number" class="form-control form-control-sm" formControlName="valueToBePaid" /> <!--[value]="valueToBePaid" disabled />-->
        </div>

        <div class="container">
          <div class="row">
            <div>
              <button type="button" class="btn btn-sm btn-light" (click)="SimulateLoan()">Simulate</button>
            </div>
            <div>
              <button type="submit" class="btn btn-sm btn-outline-secundary">Save</button>
            </div>
            <div>
              <button type="button" class="btn btn-sm btn-light" (click)="Back()">Back</button>
            </div>
          </div>
        </div>
      </form>

    </div>
  </div>
</div>

<ng-template #modalContent>
  <div class="modal-header">
    <h4 class="modal-title pull-left">Delete Confirmation</h4>
    <button type="button" class="btn-close close pull-right" aria-label="Close" (click)="modalRef?.hide()">
      <span aria-hidden="true" class="visually-hidden">&times;</span>
    </button>
  </div>
  <div class="modal-body">
    Proceed with deleting {{loanId}}
  </div>

  <div class="modal-footer">
    <button type="button" class="btn btn-light" (click)="modalRef.hide()">No</button>
    <button type="button" class="btn btn-outline-danger" data-dimiss="modal" (click)="DeleteLoan(loanId)">Yes</button>
  </div>
</ng-template>
